<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= title %> | Football Hub</title>

    <!-- Preload important resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Bootstrap + Font Awesome + AOS + Google Fonts -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        --danger-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        --glass-bg: rgba(255, 255, 255, 0.25);
        --glass-border: rgba(255, 255, 255, 0.18);
        --text-primary: #2d3748;
        --text-secondary: #718096;
        --bg-primary: #f7fafc;
        --shadow-light: 0 4px 20px rgba(0, 0, 0, 0.08);
        --shadow-medium: 0 8px 40px rgba(0, 0, 0, 0.12);
        --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.15);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        font-family: "Inter", sans-serif;
        color: var(--text-primary);
        min-height: 100vh;
        position: relative;
        line-height: 1.6;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 25% 25%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 75% 75%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: -1;
      }

      .main-container {
        background: var(--bg-primary);
        min-height: 100vh;
        border-radius: 2rem 2rem 0 0;
        margin-top: 1rem;
        position: relative;
        overflow: hidden;
      }

      .main-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 200px;
        background: linear-gradient(
          135deg,
          rgba(102, 126, 234, 0.1) 0%,
          rgba(118, 75, 162, 0.1) 100%
        );
        z-index: 0;
      }

      .content-wrapper {
        position: relative;
        z-index: 1;
        padding: 2rem 0;
      }

      /* Enhanced Player Cards */
      .player-card-modern {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 2rem;
        overflow: hidden;
        box-shadow: var(--shadow-light);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.2);
        height: 100%;
      }

      .player-card-modern:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: var(--shadow-heavy);
      }

      .player-card-modern .card-header {
        background: transparent;
        border: none;
        padding: 1.5rem 1.5rem 0;
      }

      .player-card-modern .card-body {
        padding: 1.5rem;
      }

      .player-img {
        position: relative;
        margin-bottom: 1rem;
      }

      .player-img img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 50%;
        border: 4px solid white;
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        transition: all 0.3s ease;
      }

      .player-card-modern:hover .player-img img {
        transform: scale(1.1);
        box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
      }

      .captain-badge {
        position: absolute;
        top: -10px;
        right: -10px;
        background: var(--warning-gradient);
        color: #2d3748;
        padding: 0.5rem;
        border-radius: 50%;
        font-size: 0.8rem;
        font-weight: 700;
        box-shadow: var(--shadow-medium);
        z-index: 2;
        width: 35px;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .rating-stars {
        display: flex;
        gap: 0.25rem;
        margin: 0.5rem 0;
      }

      .rating-stars i {
        color: #facc15;
        font-size: 1rem;
        filter: drop-shadow(0 2px 4px rgba(250, 204, 21, 0.3));
      }

      /* Form Enhancements */
      .form-control,
      .form-select {
        border: 2px solid #e2e8f0;
        border-radius: 1rem;
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        background: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .form-control:focus,
      .form-select:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-1px);
      }

      /* Button Enhancements */
      .btn {
        border-radius: 0.75rem;
        font-weight: 600;
        padding: 0.75rem 1.5rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .btn-primary {
        background: var(--primary-gradient);
        border: none;
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-light);
        color: white;
      }

      .btn-success {
        background: var(--success-gradient);
        border: none;
        color: white;
      }

      .btn-success:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-light);
        color: white;
      }

      .btn-warning {
        background: var(--warning-gradient);
        border: none;
        color: #2d3748;
      }

      .btn-warning:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-light);
        color: #2d3748;
      }

      .btn-danger {
        background: var(--danger-gradient);
        border: none;
        color: white;
      }

      .btn-danger:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-light);
        color: white;
      }

      /* Loading States */
      .loading {
        position: relative;
        pointer-events: none;
        opacity: 0.7;
      }

      .loading::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 20px;
        height: 20px;
        margin: -10px 0 0 -10px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .main-container {
          margin-top: 0;
          border-radius: 0;
        }

        .content-wrapper {
          padding: 1rem 0;
        }

        .player-img img {
          width: 80px;
          height: 80px;
        }

        .player-card-modern {
          margin-bottom: 1rem;
        }
      }

      /* Accessibility Improvements */
      .btn:focus {
        outline: 3px solid rgba(102, 126, 234, 0.3);
        outline-offset: 2px;
      }

      .form-control:focus,
      .form-select:focus {
        outline: 3px solid rgba(102, 126, 234, 0.3);
        outline-offset: 2px;
      }

      /* Smooth transitions for better UX */
      a,
      button,
      input,
      select,
      textarea {
        transition: all 0.3s ease;
      }

      /* Print styles */
      @media print {
        body::before {
          display: none;
        }

        .main-container {
          background: white;
          box-shadow: none;
        }

        .navbar,
        .btn,
        .alert {
          display: none;
        }
      }
    </style>
  </head>

  <body>
    <%- include('partials/navbar') %>

    <div class="main-container">
      <div class="content-wrapper">
        <main class="container">
          <%- include('partials/alerts') %> <%- body %>
        </main>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div
      id="loadingOverlay"
      class="d-none position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-flex align-items-center justify-content-center"
      style="z-index: 9999"
    >
      <div class="text-center text-white">
        <div class="spinner-border mb-3" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p>Loading...</p>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>
      // Initialize AOS
      AOS.init({
        duration: 800,
        easing: "ease-out-cubic",
        once: true,
        offset: 100,
      });

      // Global loading state management
      function showLoading() {
        document.getElementById("loadingOverlay").classList.remove("d-none");
      }

      function hideLoading() {
        document.getElementById("loadingOverlay").classList.add("d-none");
      }

      // Auto-hide loading on page load
      window.addEventListener("load", function () {
        hideLoading();
      });

      // Add loading state to forms
      document.querySelectorAll("form").forEach((form) => {
        form.addEventListener("submit", function (e) {
          const submitBtn = this.querySelector('button[type="submit"]');
          if (submitBtn && !submitBtn.disabled) {
            submitBtn.classList.add("loading");
            submitBtn.disabled = true;

            // Re-enable after 3 seconds as fallback
            setTimeout(() => {
              submitBtn.classList.remove("loading");
              submitBtn.disabled = false;
            }, 3000);
          }
        });
      });

      // Enhanced tooltips
      var tooltipTriggerList = [].slice.call(
        document.querySelectorAll('[data-bs-toggle="tooltip"]')
      );
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      // Keyboard navigation improvements
      document.addEventListener("keydown", function (e) {
        // ESC key to close modals
        if (e.key === "Escape") {
          const openModal = document.querySelector(".modal.show");
          if (openModal) {
            const modal = bootstrap.Modal.getInstance(openModal);
            if (modal) modal.hide();
          }
        }
      });

      // Improved image lazy loading
      if ("IntersectionObserver" in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const img = entry.target;
              if (img.dataset.src) {
                img.src = img.dataset.src;
                img.classList.remove("loading-shimmer");
                imageObserver.unobserve(img);
              }
            }
          });
        });

        document.querySelectorAll("img[data-src]").forEach((img) => {
          imageObserver.observe(img);
        });
      }
    </script>

    <%- include('partials/scripts') %>
  </body>
</html>
